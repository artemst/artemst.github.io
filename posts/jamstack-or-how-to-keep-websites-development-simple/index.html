<!DOCTYPE html><html lang="ru-RU"> <head prefix="og: http://ogp.me/ns#"><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v3.6.5"><title>System Out • JAM stack или как перестать переусложнять разработку веб-сайтов</title><meta name="description" content="Обзор технологии генерации сайтов под названием JAM Stack или SSG. Плюсы и минусы архитектуры веб-сайта, построенного на базе такого подхода."><link rel="canonical" href="https://systemout.blog/posts/jamstack-or-how-to-keep-websites-development-simple/"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="sitemap" href="/sitemap-index.xml"><meta property="telegram:channel" content="@SystemOutBlog"><meta property="og:site_name" content="SystemOut.blog"><meta property="og:title" content="JAM stack или как перестать переусложнять разработку веб-сайтов"><meta property="og:description" content="Обзор технологии генерации сайтов под названием JAM Stack или SSG. Плюсы и минусы архитектуры веб-сайта, построенного на базе такого подхода."><meta property="og:type" content="website"><meta property="og:image" content="https://systemout.blog/_astro/02-1-jamstack-cover.4829e476.jpg">
            <meta name="twitter:image" content="https://systemout.blog/_astro/02-1-jamstack-cover.4829e476.jpg">
            <meta name="twitter:card" content="summary_large_image"><!-- Yandex.Metrika counter -->
            <script type="text/javascript">
               (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
               m[i].l=1*new Date();
               for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
               k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
               (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

               ym(96019340, "init", {
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true
               });
            </script>
            <noscript><div><img src="https://mc.yandex.ru/watch/96019340" style="position:absolute; left:-9999px;" alt=""></div></noscript>
            <!-- /Yandex.Metrika counter --><link rel="stylesheet" href="/_astro/about.f1b67427.css" /><script type="module">const t="max-lg:hidden",e=document.querySelector("#menuBarButton"),n=document.querySelector("#menuBarNav");e!==void 0&&e&&n!==void 0&&n&&(console.log("Add menuBarButton click handler"),e.addEventListener("click",()=>{n.classList.toggle(t)}));
</script>
<script type="module" src="/_astro/page.30c903a1.js"></script></head> <body class="bg-stone-100"> <div class="md:container md:mx-auto xl:max-w-screen-xl"> <header class="bg-sidebar-main text-white
        lg:fixed lg:flex lg:h-full
        lg:max-h-screen lg:min-h-screen
        lg:w-64 lg:flex-col lg:overflow-y-auto
        lg:text-center lg:scrollbar-hide xl:w-72"> <div class="h-24
        max-lg:flex sm:px-4
        lg:h-auto"> <div class="h-full
                w-24 bg-logo bg-contain bg-left
                bg-no-repeat max-lg:ml-2
                max-[289px]:hidden xs:w-28 md:w-32
                lg:mt-6 lg:h-40 lg:w-full lg:bg-center xl:mt-8"></div> <div class="grow self-center max-lg:ml-12 max-lg:mr-6 max-sm:ml-4"> <div class="font-sans text-2xl
                    font-bold drop-shadow-lg max-lg:tracking-wide sm:text-3xl md:text-[2rem] lg:pt-6
                    xl:pt-8 xl:text-[2.1rem] xl:tracking-wide"> <a href="/" class="text-white no-underline
                        lg:before:content-['•'] lg:after:content-['•']">
System&nbsp;Out
</a> </div> <div class="pt-1
                    text-xs tracking-wide
                    text-gray-100
                    drop-shadow-md max-xs:hidden lg:mt-4
                    lg:text-sm lg:leading-tight xl:text-[0.95rem]">
Yet another dev blog
</div> </div> <button id="menuBarButton" type="button" title="Меню" class="self-center rounded-md border border-gray-400
                    max-sm:mr-4 sm:mr-1 lg:hidden"> <svg class="m-2 w-6 text-stone-200 drop-shadow-md" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M3 18v-2h18v2Zm0-5v-2h18v2Zm0-5V6h18v2Z"></path></svg> </button> </div> <div id="menuBarNav" class="pt-4 max-lg:hidden lg:my-16"> <nav class="text-center
                text-lg tracking-wide
                drop-shadow-lg lg:text-[1.35rem]"> <ul class="list-none pl-0 decoration-1 underline-offset-4
                    [&>*]:pb-2 [&>*]:lg:pb-3 [&>li>*]:text-white"> <li> <a class="text-white" href="/" rel="prefetch">Главная</a> </li> <li><a href="/posts/" rel="prefetch">Cтатьи</a></li> <li><a href="/about/">Обо мне</a></li> </ul> </nav> <div class="mt-6 flex justify-center py-4 drop-shadow-md
                lg:mt-20 [&>*]:mx-3 [&>*]:w-6
                [&>*]:text-white [&>*]:lg:w-7"> <!--            <a href="#" title="GitHub: <name>" target="_blank">--> <!--                <GitHubIcon class="hover:scale-150"></GitHubIcon>--> <!--            </a>--> <!--
            <a
                href="https://mastodon.world/@systemout"
                title="Mastodon: @systemout"
            >
                <MastodonIcon class="hover:scale-150" />
            </a>
            --> <a href="mailto:artemst88@yandex.ru" class="font-bold" title="Email me" target="_blank"> <svg class="hover:scale-150" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.608 12.172c0 .84.239 1.175.864 1.175c1.393 0 2.28-1.775 2.28-4.727c0-4.512-3.288-6.672-7.393-6.672c-4.223 0-8.064 2.832-8.064 8.184c0 5.112 3.36 7.896 8.52 7.896c1.752 0 2.928-.192 4.727-.792l.386 1.607c-1.776.577-3.674.744-5.137.744c-6.768 0-10.393-3.72-10.393-9.456c0-5.784 4.201-9.72 9.985-9.72c6.024 0 9.215 3.6 9.215 8.016c0 3.744-1.175 6.6-4.871 6.6c-1.681 0-2.784-.672-2.928-2.161c-.432 1.656-1.584 2.161-3.145 2.161c-2.088 0-3.84-1.609-3.84-4.848c0-3.264 1.537-5.28 4.297-5.28c1.464 0 2.376.576 2.782 1.488l.697-1.272h2.016v7.057h.002zm-2.951-3.168c0-1.319-.985-1.872-1.801-1.872c-.888 0-1.871.719-1.871 2.832c0 1.68.744 2.616 1.871 2.616c.792 0 1.801-.504 1.801-1.896v-1.68z"></path></svg> </a> <a href="https://t.me/SystemOutBlog" title="Подписывайся на Telegram: SystemOutBlog" target="_blank"> <svg class="hover:scale-150" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 0 0-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.12-.31-1.08-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .38z"></path></svg> </a> <a href="/rss.xml" title="RSS Feed: System Out Blog" target="_blank"> <svg class="hover:scale-150" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M5 21q-.825 0-1.413-.587Q3 19.825 3 19q0-.825.587-1.413Q4.175 17 5 17q.825 0 1.412.587Q7 18.175 7 19q0 .825-.588 1.413Q5.825 21 5 21Zm12 0q0-2.9-1.1-5.438q-1.1-2.537-3.012-4.45Q10.975 9.2 8.438 8.1Q5.9 7 3 7V4q3.525 0 6.625 1.338q3.1 1.337 5.4 3.637q2.3 2.3 3.638 5.4Q20 17.475 20 21Zm-6 0q0-3.325-2.338-5.662Q6.325 13 3 13v-3q2.3 0 4.3.863q2 .862 3.488 2.349q1.487 1.488 2.349 3.488Q14 18.7 14 21Z"></path></svg> </a> </div> </div> <div class="mb-8 flex h-full flex-col justify-end max-lg:hidden"> <a href="https://www.vecteezy.com/free-vector/free" class="text-xs text-stone-200" target="_blank">
Free Vectors by Vecteezy
</a> <p class="mt-2 text-center text-sm text-stone-100 drop-shadow-md">
&#169; 2024 System Out
</p> </div> </header>  <main class="bg-white w-full
                    lg:min-h-screen lg:block lg:pl-64 xl:pl-72"> <section class="max-lg:min-h-[85vh]
					px-4 sm:px-6 md:px-10 lg:px-12
					pt-6 lg:pt-10
					pb-14">  <article> <div class="flex items-center place-content-between"> <div class="inline-flex flex-shrink-0 mr-6"> <svg class="inline w-5 text-zinc-500 mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><rect width="416" height="384" x="48" y="80" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32" rx="48"></rect><circle cx="296" cy="232" r="24" fill="currentColor"></circle><circle cx="376" cy="232" r="24" fill="currentColor"></circle><circle cx="296" cy="312" r="24" fill="currentColor"></circle><circle cx="376" cy="312" r="24" fill="currentColor"></circle><circle cx="136" cy="312" r="24" fill="currentColor"></circle><circle cx="216" cy="312" r="24" fill="currentColor"></circle><circle cx="136" cy="392" r="24" fill="currentColor"></circle><circle cx="216" cy="392" r="24" fill="currentColor"></circle><circle cx="296" cy="392" r="24" fill="currentColor"></circle><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M128 48v32m256-32v32"></path><path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32" d="M464 160H48"></path></svg> <span class="xs:hidden pt-1 text-sm text-zinc-500 ml-1"> 15.12.23 </span> <span class="max-xs:hidden pt-1 text-sm text-zinc-500 ml-1"> 15 декабря 2023 г. </span> </div> <a class="mr-3 text-sm text-zinc-600 no-underline" id="go-back" href="#">
⇦&nbsp;Назад
</a> <script lang="ts">
    document
        .getElementById('go-back')
        .addEventListener('click', () => window.history.back());
</script> </div> <h1 class="text-balance">JAM stack или как перестать переусложнять разработку веб-сайтов</h1> <div class="mb-4 text-base"><a class="mb-1 mr-3 inline-block rounded-md border-solid border-header-blue bg-header-blue/10 pl-2 pr-3 text-sidebar-main no-underline hover:bg-header-blue/20" href="/tags/web-development/"><svg class="mr-2 inline w-4 text-sidebar-main" xmlns="http://www.w3.org/2000/svg" style="vertical-align: -0.2em;" viewBox="0 0 24 24"><path fill="currentColor" d="M19.75 2A2.25 2.25 0 0 1 22 4.25v5.462a3.25 3.25 0 0 1-.952 2.298l-8.5 8.503a3.255 3.255 0 0 1-4.597.001L3.489 16.06a3.25 3.25 0 0 1-.004-4.596l8.5-8.51a3.25 3.25 0 0 1 2.3-.953h5.465Zm0 1.5h-5.466c-.464 0-.91.185-1.238.513l-8.512 8.523a1.75 1.75 0 0 0 .015 2.462l4.461 4.454a1.755 1.755 0 0 0 2.477 0l8.5-8.503a1.75 1.75 0 0 0 .513-1.237V4.25a.75.75 0 0 0-.75-.75ZM17 5.502a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3Z"></path></svg> web development  </a><a class="mb-1 mr-3 inline-block rounded-md border-solid border-header-blue bg-header-blue/10 pl-2 pr-3 text-sidebar-main no-underline hover:bg-header-blue/20" href="/tags/jamstack/"><svg class="mr-2 inline w-4 text-sidebar-main" xmlns="http://www.w3.org/2000/svg" style="vertical-align: -0.2em;" viewBox="0 0 24 24"><path fill="currentColor" d="M19.75 2A2.25 2.25 0 0 1 22 4.25v5.462a3.25 3.25 0 0 1-.952 2.298l-8.5 8.503a3.255 3.255 0 0 1-4.597.001L3.489 16.06a3.25 3.25 0 0 1-.004-4.596l8.5-8.51a3.25 3.25 0 0 1 2.3-.953h5.465Zm0 1.5h-5.466c-.464 0-.91.185-1.238.513l-8.512 8.523a1.75 1.75 0 0 0 .015 2.462l4.461 4.454a1.755 1.755 0 0 0 2.477 0l8.5-8.503a1.75 1.75 0 0 0 .513-1.237V4.25a.75.75 0 0 0-.75-.75ZM17 5.502a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3Z"></path></svg> jamstack  </a><a class="mb-1 mr-3 inline-block rounded-md border-solid border-header-blue bg-header-blue/10 pl-2 pr-3 text-sidebar-main no-underline hover:bg-header-blue/20" href="/tags/system-architecture/"><svg class="mr-2 inline w-4 text-sidebar-main" xmlns="http://www.w3.org/2000/svg" style="vertical-align: -0.2em;" viewBox="0 0 24 24"><path fill="currentColor" d="M19.75 2A2.25 2.25 0 0 1 22 4.25v5.462a3.25 3.25 0 0 1-.952 2.298l-8.5 8.503a3.255 3.255 0 0 1-4.597.001L3.489 16.06a3.25 3.25 0 0 1-.004-4.596l8.5-8.51a3.25 3.25 0 0 1 2.3-.953h5.465Zm0 1.5h-5.466c-.464 0-.91.185-1.238.513l-8.512 8.523a1.75 1.75 0 0 0 .015 2.462l4.461 4.454a1.755 1.755 0 0 0 2.477 0l8.5-8.503a1.75 1.75 0 0 0 .513-1.237V4.25a.75.75 0 0 0-.75-.75ZM17 5.502a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3Z"></path></svg> system architecture  </a></div>  <div class="pt-4 pb-2"> <img src="/_astro/02-1-jamstack-cover.4829e476_2swvwX.webp" class="w-full h-full" alt="Jamstack" width="1920" height="1359" loading="lazy" decoding="async"> </div>  <p>Веб-сайты бывают разными.</p>
<p>Когда-то давным-давно я разворачивал сайт на CMS Wordpress с целью заработка на контекстной рекламе Google Adsense. У меня был виртуальный хостинг, который за 200-300 рублей в месяц, выделял мне не более 5% процессорного времени далеко не самого мощного сервера. И на этом сервере по мануалам из интернета я устанавливал MySQL, PHP, Apache HTTP Server и Wordpress. Если на сайт заходило больше 30-ти человек, то хостинг на минуту-другую прекращал выдавать ресурсы моему серверу из-за перерасхода лимита, в результате чего сайт был недоступен. Помимо этого раз в месяц на несколько часов хостинг выключался на техническое обслуживание, что тоже приводило к даунтайму. Но тем не менее всё это как-то работало и даже приносило какие-то минимальные деньги.</p>
<p>Не так давно я работал на проекте, где разрабатывался веб-портал, архитектурная схема которого не помещалась на экран монитора. Там было несколько бэкендов, из которых сайт получал информацию, и несколько СУБД с различными кэшами и данными для контента в различных видах. Веб часть была построена на базе крупной CMS, ориентированной на корпоративные масштабы. Всё это разворачивалась в кластере из нескольких серверов в нескольких датацентрах для максимальной отказоустойчивости. Развёртывание происходило автоматизированными скриптами, которые позволяли в случае отказа какого-либо из серверов поднять ему замену за несколько минут. Поверх всего этого был слой из различных мониторингов, служб оповещения и даже группы дежурных администраторов, которые в любое время суток были готовы среагировать на возникшие проблемы и оперативно устранить типовые ошибки.</p>
<p>Даже немного странно, что системы из первого и второго примеров пользователи в итоге называют одинаково – веб-сайт.</p>
<p>Можно ли считать, что сайт из второго примера надёжнее, чем сайт из первого примера?<br>
Да, но только лишь при определённых условиях. А именно при тех затратах на обслуживание и поддержку, которые выделялись на этот портал. При бюджете в 300 рублей на хостинг, он бы даже не запустился, в то время как сайтик с рекламой успешно работал на этих мощностях 80% времени.</p>
<p>Мне всегда казалось, что разработка веб-сайтов в какое-то время свернула куда-то не туда.<br>
Сейчас наличие интернет ресурса – это практически must have для всех, кто ведёт хоть какой-то бизнес, начиная от крупных корпораций и заканчивая самозанятыми мастерами маникюра или репетиторами на дому. При этом разработка самих сайтов превратилась во что-то очень сложное и даже монстрообразное.<br>
Прошли времена, когда веб-разработчику достаточно было знать HTML + CSS и немного JavaScript. Сейчас сайты – это сложные информационные системы с базами данных, бэкендами и фронтендами, построенными на базе различных фреймворков. Всё это нужно как-то уметь разрабатывать, обслуживать и поддерживать.<br>
И если найти деньги на разработку сайта малый бизнес ещё может, то регулярно платить за поддержку и разбор инцидентов готов далеко не каждый.<br>
В результате часто побеждает вариант публикации информации о себе в социальных сетях разной степени запрещённости в РФ или использования конструкторов сайтов, возможности кастомизации которых порой не выдерживают никакой критики.</p>
<p>Но что если всё-таки нужен веб-сайт? Хороший, функциональный, презентабельный, надёжный, но при этом обладающей минимальной стоимостью обслуживания?</p>
<p>Несколько лет назад передо мной встал именно такой вопрос.</p>
<h3 id="в-погоне-за-минимализмом">В погоне за минимализмом</h3>
<p>За годы работы в IT у меня уже выработалась некоторая профессиональная деформация, когда в любом компоненте системы ты в первую очередь видишь точку отказа. Возможно когда-нибудь ИИ разовьётся до таких высот, что сможет создавать безотказные автоматизированные системы. Но пока в разработке таких систем и их компонентов присутствует тот самый “человеческий фактор”, все эти истории с упавшими СУБД, серверами и бэкендами в новогодние ночи были, есть и будут.</p>
<p>В больших корпоративных системах такие проблемы обычно решаются резервированием, когда каждый компонент разворачивается в двух или более экземплярах, позволяя системе пережить падение одного из узлов.<br>
В малых системах такие проблемы обычно решаются верой в лучшее.</p>
<p>Так как хотелось чего-то б<strong>о</strong>льшего, чем надежды на авось, я начал искать способы разработки сайта с минимально возможным набором компонентов.<br>
Любой сайт – это как минимум какая-то HTML страница, стилизованная с помощью CSS. Еще нужен какой-нибудь сервер, на котором будет крутиться какой-нибудь HTTP сервер а‑ля nginx, который будет отдавать по запросу эту самую HTML страницу.<br>
И… всё!<br>
То есть те самые HTML + CSS + JavaScript (если нужно как-то «оживить» странички), которых когда-то было достаточно для веб-разработки.<br>
Да и что может быть надёжнее, чем простой http сервер, отдающий статику? Даже если этот сайт я положу на флешку и повезу вам лично домой, рисков, что что-то пойдёт не так, будет гораздо больше.</p>
<p>Осталось понять, как всё это разрабатывать в современных условиях. Если сайт будет насчитывать сотни страниц, меньше всего захочется добавлять и обновлять их вручную.</p>
<h3 id="и-тут-на-сцену-выходит-jam-stack">И тут на сцену выходит JAM stack</h3>
<p>JAM – аббревиатура от слов JavaScript, API, Markup. Это подход, когда вы при помощи JavaScript получаете данные из какого-то API, накладываете их на разметку страницы и генерируете статический сайт.<br>
Стек технологий, реализующих эту концепцию, называют JAM stack или JAMstack или даже Jamstack.</p>
<p>Ничего непонятно? Давайте разберём на примере.</p>
<p>Допустим, у нас есть сайт с каталогом каких-нибудь товаров. Допустим, у нас на данный момент 50 товаров и мы хотим их постранично отображать по 10 штук.</p>
<p>В обычном подходе при посещении пользователем каталога товаров браузер отправит запрос на сервер, где тот будет перенаправлен на некоторый обработчик, например, написанный на PHP.<br>
Запустится интерпретатор PHP и начнёт выполнять скрипт: возьмёт шаблон страницы каталога, сделает запрос к базе данных для получения информации о товарах, получит, к примеру, первые 10 товаров и информацию о том, что их всего 50, наложит эту информацию на шаблон, сгенерирует итоговую html страницу каталога с товарами и ссылками на следующие 4 страницы каталога и отправит этот html в ответ на запрос браузеру.<br>
В результате пользователь увидит первую страницу каталога, а при переходе на следующую страницу весь процесс повторится, за исключением того, что сервер вернёт данные со следующими 10-ю товарами.<br>
Такой подход называется <em>Server-Side Rendering</em> или <em>SSR</em>.</p>
<p>При другом, не менее распространённом подходе у нас будет одна html страница, на которой будет какая-то общая информация каталога, а также JavaScript код, который после загрузки этой страницы в браузере клиента выполнит запрос на сервер, получит данные о товарах для текущей страницы и общее количество товаров, сгенерирует html код с этими товарами и со ссылками на следующие 4 страницы и подставит этот код в специально заготовленное место внутри страницы каталога.<br>
В результате посетитель так же увидит итоговую страницу каталога с первыми десятью товарами и ссылками на другие страницы каталога, а при переходе на вторую страницу весь алгоритм повторится за исключением того, что JavaScript запросит у сервера второй десяток товаров.<br>
Такой подход называется <em>Client-Side Rendering</em> – <em>CSR</em>.</p>
<p>Можно заметить, что подходы очень схожи, разница только в том, где происходит логика “сборки” итоговой html страницы с данными из БД: на стороне сервера или на стороне клиента (в браузере).<br>
Второй важный момент – вся эта логика выполняется каждый раз при посещении каждого пользователя на каждую страницу каталога. Поэтому нагрузка на сервер и на базу данных растёт с количеством посетителей.</p>
<p>Как этот же процесс будет выглядеть с применением JAM stack?<br>
У нас будет одна шаблонная html страница каталога, в которой примерно так же, как и в предыдущем подходе с помощью JavaScript будет происходить получение данных из API, преобразование этих данных в html и подстановка его в шаблон страницы.<br>
Но вся эта логика будет выполняться не у пользователя в момент загрузки страницы, а один раз на сервере, когда мы запустим процесс генерации итогового «дистрибутива» нашего сайта.<br>
Результатом генерации будет 5 html страниц, на каждой из которых сразу будет содержаться информация о нужных десяти товарах. Далее этот “дистрибутив” сайта разворачивается на сервере, и при переходе пользователя на каждую страницу каталога сервер будет отдавать статическую html страницу с уже готовым контентом.<br>
Этот подход называется <em>Static Site Generation</em> – <em>SSG</em>.</p>
<p>В чём преимущества подобного подхода?</p>
<ol>
<li>Уменьшается нагрузка на бэкенд. Теперь к нему за информацией ходит не каждый пользователь и не с каждой страницы, а только генератор один раз при сборке дистрибутива.</li>
<li>Увеличивается надёжность сайта. В случае недоступности бэкенда в первых двух подходах пользователь увидит унылую информацию о технических проблемах с просьбой зайти позже. С SSG подходом пользователь не заметит никаких проблем и получит доступ ко всей информации, так как она заранее сгенерирована в статические html файлы.</li>
<li>Снижаются требования к хостингу. Для развёртывания сайта достаточно умения отдавать статический контент. Помимо простых VPS с nginx на борту, это могут быть GitHub Pages, Vercel, AWS S3 или Yandex Cloud Object Storage, стоимость которых в разы ниже, чем стоимость хостингов, на которых нужно разворачивать фронтенд + бэкенд + БД.</li>
<li>SEO оптимизация. Статическая информация очень хорошо воспринимается ботами поисковых систем. Вдобавок современные SSG фреймворки из коробки могут производить много оптимизаций при генерации: например, оптимизировать картинки или добавить предзагрузку страниц, на которые можно по ссылкам перейти с текущей страницы. В результате переходы по страницам сайта становятся не просто быстрыми, а практически моментальными, что положительно сказывается и на пользовательском опыте, и на оценках вашего сайта поисковыми системами, а значит и на более высоком его ранжировании.</li>
</ol>
<p>Стоит отметить, что данные при генерации не обязательно получать из какого-то веб-сервиса. Источником контента могут быть markdown файлы, хранящиеся рядом с кодовой базой сайта.<br>
Например, этот блог построен как раз по такому принципу: новые статьи добавляются в виде markdown файлов в репозиторий с кодом сайта, изменения пушатся на GitHub, запускается сборка сайта с помощью GitHub Actions и результат публикуется на GitHub Pages. Всё быстро, надёжно и бесплатно 🙂</p>
<p>Если же с контентом работает человек, который ничего не знает про markdown и репозитории, то для него можно развернуть так называемую headless CMS – систему управления контентом, которая предоставляет удобный интерфейс работы с данными и умеет отдавать эти самые данные  генератору сайта через API.<br>
Хорошим примером тут может быть open source CMS Strapi.<br>
Да, эту CMS нужно будет куда-то развернуть, но, как я уже писал выше, требования к отказоустойчивости такой админки будут в разы меньше: её падение повлияет только на возможность публикации нового контента, в то время как пользователи продолжат успешно пользоваться самим сайтом.</p>
<p>Другой вариант – воспользоваться услугами облачных headless CMS, например, Storyblok. За не очень большие деньги получаешь и дружественный интерфейс работы с контентом, и надёжность/высокую доступность такой системы.</p>
<h3 id="ложка-дёгтя-в-бочке-мёда">Ложка дёгтя в бочке мёда</h3>
<p>Наверняка внимательный читатель к этому моменту задаётся вопросом: а что делать с различными динамическими функциями, которым всё-таки нужен бэкенд и база данных в реальном времени.<br>
Это могут быть какие-нибудь оценки товаров, форма обратной связи, оформление заказа и т.п.<br>
Конечно статический сайт не позволит реализовать такие вещи.</p>
<p>Фреймворки, реализующие JAM подход, позволяют разделять ваш JavaScript код на «серверный», т.е. тот, который будет исполняться во время генерации сайта (получение данных, разбиение их на страницы и т.д.) и на «клиентский» – тот, который будет исполнен в браузере у пользователя.<br>
Таким образом на статическом сайте могут существовать динамические компоненты, взаимодействующие с бэкендом, например, для сохранения оценки товара или для заказа.</p>
<p>И сейчас вы можете разочарованно развести руками: как же так, и вот снова нам нужен бэкенд, и вот снова нам нужна СУБД, и снова всё это нужно как-то поддерживать и заботиться о доступности. Зачем тогда было городить весь этот огород с генератором?</p>
<p>Да, это не серебряная пуля.<br>
Но давайте хорошенько подумаем: а как часто нам <b>действительно</b> нужны динамические функции?</p>
<p>Я не зря взял пример магазина с товарами, хотя, казалось бы, это неподходящий сценарий для статических сайтов.<br>
Если мы разрабатываем маркетплейс или интернет-магазин для крупного ритейлера, где список товаров и информация о них может меняться быстрее, чем будет генерироваться новая версия сайта, то действительно вряд ли стоит смотреть в сторону Jamstack.</p>
<p>Но что если это сайт для небольшой пиццерии или булочной с устоявшимся ассортиментом? Или магазинчик мёда с собственной пасеки?<br>
Можно ли считать сайт мастера, оказывающего парикмахерские услуги на дому, слишком динамическим для статической генерации?<br>
Или всё-таки информация о мастере, его услугах, фотогалерея его работ – это статика, и лишь одна функция динамическая – запись на стрижку?</p>
<p>И это я не говорю о тысячах лэндингов, статейных сайтов и блогов, которые являются идеальными кандидатами на переход с какого-нибудь Wordpress на SSG фреймворк.</p>
<p>Для каждой динамической функции потребуется свой бэкенд-сервис. Но вынося его в самостоятельный компонент, отделённый от статического сайта, вы немного двигаетесь в сторону микросервисной архитектуры, про которую все так любят говорить, но мало кто использует.<br>
Это значит, что потеря работоспособности одной функциональности может не повлиять на другую функциональность. И уж тем более не повлияет на доступность всего сайта.<br>
Упал сервис комментариев? Не беда, посмотреть товары и купить их всё равно можно.<br>
Упал сервис заказа товаров? Плохо, но клиент всё ещё может посмотреть на ассортимент товаров и, найдя понравившийся товар, либо зайти позже, либо позвонить по телефону и оформить заказ через оператора.</p>
<p>И получается, что если внимательнее посмотреть на функции того или иного сайта, то подходящих под Jamstack сценариев будет гораздо больше, чем только лэндинги и блоги.</p>
<h3 id="пару-слов-об-ssg-фреймворках">Пару слов об SSG фреймворках</h3>
<p>Так как разработка статического сайта очень похожа на разработку динамического CSR сайта  (в первом случае код выполняется на сервере во время генерации сайта, во втором случае – у клиента в браузере), то и вести такую разработку удобнее не на чистом JS, а с использованием какого-нибудь JS фреймворка.<br>
Практически для каждого популярного варианта найдётся свой фреймворк (порой даже не один), реализующий SSG:</p>
<ul>
<li>Next.js, Gatsby.js для React</li>
<li>Nuxt.js, VuePress для Vue</li>
<li>SvelteKit для Svelte</li>
<li>Scully для Angular и т.д.</li>
</ul>
<p>Но абсолютной жемчужиной в этой экосистеме, на мой взгляд, является фреймворк <a href="https://astro.build/" rel="nofollow noreferer noopener" target="_blank">Astro</a>, который вобрал в себя всё самое лучшее, что было в других фреймворках, и предложил возможность использовать любой JS фреймворк (или даже чистый JavaScript) в зависимости от предпочтений разработчиков.</p>
<p>Про Astro, надеюсь, я напишу отдельную статью.</p>
<p>А про Jamstack у меня всё.</p>
<p>Спасибо.</p> </article> <div class="mt-8 border-t border-header-blue/80"> <div class="mt-4"></div> <script async src="https://telegram.org/js/telegram-widget.js?22" data-telegram-discussion="SystemOutBlog" data-comments-limit="30" data-colorful="1" data-color="445D7B">
        </script> </div>  </section> <button id="toTopBtn" title="Наверх" class="fixed bottom-4 right-5 z-40 hidden
        rounded-full border-2 border-sidebar-main/50 p-2.5 text-header-blue/70 shadow-md
        transition duration-150 ease-in-out
        hover:text-header-blue hover:shadow-lg active:border-sidebar-main active:bg-header-blue
        active:text-white sm:bottom-8 sm:right-8
        sm:p-3 xl:bottom-10 xl:right-12"> <svg class="w-[1.125rem] rotate-[270deg] hover:scale-110 sm:w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M7.15 21.1q-.375-.375-.375-.888q0-.512.375-.887L14.475 12l-7.35-7.35q-.35-.35-.35-.875t.375-.9q.375-.375.888-.375q.512 0 .887.375l8.4 8.425q.15.15.213.325q.062.175.062.375t-.062.375q-.063.175-.213.325L8.9 21.125q-.35.35-.862.35q-.513 0-.888-.375Z"></path></svg> </button> <script lang="ts">
    const btn = document.getElementById('toTopBtn');
    btn.addEventListener('click', () => topFunction());

    window.onscroll = function () {
        scrollFunction();
    };

    function scrollFunction() {
        if (
            document.body.scrollTop > 500 ||
            document.documentElement.scrollTop > 500
        ) {
            btn.style.display = 'block';
        } else {
            btn.style.display = 'none';
        }
    }

    function topFunction() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
</script> </main> </div> </body></html>